<!DOCTYPE html>
<html lang=en>

<head>
  <title>MODL Interpreter Testbed</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <script src="../web/modl-interpreter-latest.js"></script>
  <div class=outer>
    <h1>MODL Interpreter Testbed</h1>
    <div class='rawdata'>
      <h3>Raw MODL Data</h3>
      <textarea class='input' rows="20" id='data'></textarea>
      <p class=errors id=rawDataErrors></p>
      <p><input type="button" value="Execute" id='execute' onclick="execute()"></p>
    </div>
    <div class='result'>
      <h3>Result</h3>
      <textarea class='input' rows="20" readonly=true id=result></textarea>
      <p class=errors id=resultErrors></p>
    </div>
  </div>

  <script>

    const num = require('modl-interpreter');
    const interpreter = new num.Interpreter.Interpreter();

    const execute = () => {
      try {
        document.getElementById('rawDataErrors').innerHTML = '';
        const data = document.getElementById('data').value;
        if (data) {
          const expanded = interpreter.interpretToPrettyJsonString(data);

          document.getElementById('result').value = expanded;
        }
      } catch (e) {
        document.getElementById('rawDataErrors').innerHTML = e.message;
      }

    };

  </script>

</body>

</html>